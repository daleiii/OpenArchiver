import{_ as t,c as o,o as i,ag as r}from"./chunks/framework.S-Qvb3wi.js";const h=JSON.parse('{"title":"Connecting to a JMAP Server","description":"","frontmatter":{},"headers":[],"relativePath":"user-guides/email-providers/jmap.md","filePath":"user-guides/email-providers/jmap.md"}'),s={name:"user-guides/email-providers/jmap.md"};function a(n,e,l,u,c,p){return i(),o("div",null,e[0]||(e[0]=[r('<h1 id="connecting-to-a-jmap-server" tabindex="-1">Connecting to a JMAP Server <a class="header-anchor" href="#connecting-to-a-jmap-server" aria-label="Permalink to &quot;Connecting to a JMAP Server&quot;">​</a></h1><p>This guide will walk you through connecting a JMAP-enabled email account as an ingestion source. JMAP (JSON Meta Application Protocol) is a modern, efficient alternative to IMAP that is supported by providers like Fastmail, Stalwart, Cyrus IMAP, and others.</p><h2 id="what-is-jmap" tabindex="-1">What is JMAP? <a class="header-anchor" href="#what-is-jmap" aria-label="Permalink to &quot;What is JMAP?&quot;">​</a></h2><p>JMAP (RFC 8620/8621) is a modern email protocol designed as a replacement for IMAP. It uses JSON over HTTP, making it simpler to implement and more efficient for synchronization. Key benefits include:</p><ul><li><strong>Efficient sync</strong>: Uses state strings for incremental synchronization</li><li><strong>Batched requests</strong>: Multiple operations in a single HTTP request</li><li><strong>JSON-based</strong>: Easy to debug and work with</li></ul><h2 id="supported-providers" tabindex="-1">Supported Providers <a class="header-anchor" href="#supported-providers" aria-label="Permalink to &quot;Supported Providers&quot;">​</a></h2><p>JMAP is supported by several email providers and servers:</p><ul><li><strong>Fastmail</strong> - Full JMAP support with API tokens</li><li><strong>Stalwart Mail Server</strong> - Open-source mail server with JMAP</li><li><strong>Cyrus IMAP</strong> - Enterprise mail server with JMAP support</li><li><strong>Apache James</strong> - Java-based mail server with JMAP</li></ul><h2 id="step-by-step-guide" tabindex="-1">Step-by-Step Guide <a class="header-anchor" href="#step-by-step-guide" aria-label="Permalink to &quot;Step-by-Step Guide&quot;">​</a></h2><ol><li><p><strong>Navigate to Ingestion Sources:</strong> From the main dashboard, go to the <strong>Ingestions</strong> page.</p></li><li><p><strong>Create a New Source:</strong> Click the <strong>&quot;Create New&quot;</strong> button to open the ingestion source configuration dialog.</p></li><li><p><strong>Fill in the Configuration Details:</strong></p><ul><li><p><strong>Name:</strong> Give your ingestion source a descriptive name, such as &quot;Fastmail Account&quot;.</p></li><li><p><strong>Provider:</strong> From the dropdown menu, select <strong>&quot;JMAP (Fastmail, etc.)&quot;</strong>.</p></li><li><p><strong>JMAP Session URL:</strong> Enter the JMAP session endpoint URL for your provider.</p></li><li><p><strong>Authentication Method:</strong> Choose between Basic Auth or Bearer Token.</p></li><li><p><strong>Credentials:</strong> Enter your username/password or API token depending on the auth method.</p></li></ul></li><li><p><strong>Save Changes:</strong> Once you have filled in all the details, click the <strong>&quot;Save changes&quot;</strong> button.</p></li></ol><h2 id="provider-specific-setup" tabindex="-1">Provider-Specific Setup <a class="header-anchor" href="#provider-specific-setup" aria-label="Permalink to &quot;Provider-Specific Setup&quot;">​</a></h2><h3 id="fastmail" tabindex="-1">Fastmail <a class="header-anchor" href="#fastmail" aria-label="Permalink to &quot;Fastmail&quot;">​</a></h3><p>Fastmail provides full JMAP API access. Here&#39;s how to set it up:</p><ol><li><p><strong>Get your API Token:</strong></p><ul><li>Log in to Fastmail and go to <strong>Settings &gt; Privacy &amp; Security &gt; API tokens</strong></li><li>Create a new API token with at least &quot;Read&quot; access to mail</li><li>Copy the generated token</li></ul></li><li><p><strong>Configure Open Archiver:</strong></p><ul><li><strong>JMAP Session URL:</strong> <code>https://api.fastmail.com/jmap/session</code></li><li><strong>Authentication Method:</strong> Bearer Token (API Key)</li><li><strong>API Token:</strong> Paste the token you generated</li></ul></li></ol><h3 id="stalwart-mail-server" tabindex="-1">Stalwart Mail Server <a class="header-anchor" href="#stalwart-mail-server" aria-label="Permalink to &quot;Stalwart Mail Server&quot;">​</a></h3><p>For self-hosted Stalwart servers:</p><ol><li><p><strong>Find your JMAP endpoint:</strong></p><ul><li>Typically at <code>https://your-server.com/jmap/session</code></li><li>Or use the base URL and Open Archiver will try <code>.well-known/jmap</code> discovery</li></ul></li><li><p><strong>Configure Open Archiver:</strong></p><ul><li><strong>JMAP Session URL:</strong> <code>https://your-server.com/jmap/session</code></li><li><strong>Authentication Method:</strong> Basic Auth (Username/Password)</li><li><strong>Username:</strong> Your email address</li><li><strong>Password:</strong> Your account password</li></ul></li></ol><h3 id="cyrus-imap" tabindex="-1">Cyrus IMAP <a class="header-anchor" href="#cyrus-imap" aria-label="Permalink to &quot;Cyrus IMAP&quot;">​</a></h3><p>For Cyrus IMAP servers with JMAP enabled:</p><ol><li><p><strong>Verify JMAP is enabled:</strong></p><ul><li>Check with your server administrator that JMAP is enabled</li><li>Get the JMAP endpoint URL (often <code>https://your-server.com/jmap</code>)</li></ul></li><li><p><strong>Configure Open Archiver:</strong></p><ul><li><strong>JMAP Session URL:</strong> Your server&#39;s JMAP endpoint</li><li><strong>Authentication Method:</strong> Basic Auth (Username/Password)</li><li><strong>Username:</strong> Your email address</li><li><strong>Password:</strong> Your account password</li></ul></li></ol><h2 id="finding-your-jmap-session-url" tabindex="-1">Finding Your JMAP Session URL <a class="header-anchor" href="#finding-your-jmap-session-url" aria-label="Permalink to &quot;Finding Your JMAP Session URL&quot;">​</a></h2><p>If you&#39;re not sure of your JMAP session URL:</p><ol><li><p><strong>Try well-known discovery:</strong> Most JMAP servers support <code>/.well-known/jmap</code> autodiscovery. Enter your server&#39;s base URL and Open Archiver will attempt discovery.</p></li><li><p><strong>Check your provider&#39;s documentation:</strong> Look for JMAP or API documentation from your email provider.</p></li><li><p><strong>Common patterns:</strong></p><ul><li>Fastmail: <code>https://api.fastmail.com/jmap/session</code></li><li>Self-hosted: <code>https://mail.yourdomain.com/jmap/session</code></li></ul></li></ol><h2 id="what-happens-next" tabindex="-1">What Happens Next? <a class="header-anchor" href="#what-happens-next" aria-label="Permalink to &quot;What Happens Next?&quot;">​</a></h2><p>After you save the connection, the system will attempt to connect to the JMAP server. The status of the ingestion source will update to reflect its current state:</p><ul><li><strong>Importing:</strong> The system is performing the initial import of all emails. This may take a while depending on the size of your mailbox.</li><li><strong>Active:</strong> The initial import is complete, and the system will now periodically check for and archive new emails using JMAP&#39;s efficient state-based sync.</li><li><strong>Paused:</strong> The connection is valid, but the system will not check for new emails until you resume it.</li><li><strong>Error:</strong> The system was unable to connect using the provided credentials. Please double-check your Session URL, authentication method, and credentials.</li></ul><p>You can view, edit, pause, or manually sync any of your ingestion sources from the main table on the <strong>Ingestions</strong> page.</p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="no-jmap-account-with-mail-capability-found" tabindex="-1">&quot;No JMAP account with mail capability found&quot; <a class="header-anchor" href="#no-jmap-account-with-mail-capability-found" aria-label="Permalink to &quot;&quot;No JMAP account with mail capability found&quot;&quot;">​</a></h3><p>This error means the JMAP server responded but doesn&#39;t have email capabilities enabled for your account. Contact your server administrator.</p><h3 id="authentication-errors" tabindex="-1">Authentication Errors <a class="header-anchor" href="#authentication-errors" aria-label="Permalink to &quot;Authentication Errors&quot;">​</a></h3><ul><li><strong>For bearer tokens:</strong> Ensure the token is valid and has sufficient permissions</li><li><strong>For basic auth:</strong> Verify your username (usually full email address) and password</li></ul><h3 id="connection-timeout" tabindex="-1">Connection Timeout <a class="header-anchor" href="#connection-timeout" aria-label="Permalink to &quot;Connection Timeout&quot;">​</a></h3><ul><li>Verify the JMAP session URL is correct</li><li>Check that the server is accessible from where Open Archiver is running</li><li>Some servers may require VPN or specific network access</li></ul>',34)]))}const g=t(s,[["render",a]]);export{h as __pageData,g as default};
